<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>贾亮的博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="贾亮的博客">
<meta property="og:url" content="https://lantianjialiang.github.io/page/24/index.html">
<meta property="og:site_name" content="贾亮的博客">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="贾亮的博客">
  
    <link rel="alternate" href="/atom.xml" title="贾亮的博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">贾亮的博客</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Do Something</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://lantianjialiang.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-17920375" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/01/06/17920375/" class="article-date">
  <time datetime="2014-01-06T08:28:50.000Z" itemprop="datePublished">2014-01-06</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/C-C-Linux/">C/C++/Linux</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/01/06/17920375/">C++ dot vs arrow</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>C++ dot vs arrow<br><a href="http://www.tutorialspoint.com/cplusplus/cpp_member_operators.htm" target="_blank" rel="noopener"> http://www.tutorialspoint.com/cplusplus/cpp_member_operators.htm
</a><br>C++ pointer vs reference<br><a href="http://www.ntu.edu.sg/home/ehchua/programming/cpp/cp4_PointerReference.html" target="_blank" rel="noopener"> http://www.ntu.edu.sg/home/ehchua/programming/cpp/cp4_PointerReference.html
</a><br><a href="http://stackoverflow.com/questions/114180/pointer-vs-reference" target="_blank" rel="noopener"> http://stackoverflow.com/questions/114180/pointer-vs-reference
</a><br><a href="http://stackoverflow.com/questions/57483/what-are-the-differences-between-
pointer-variable-and-reference-variable-in-c" target="_blank" rel="noopener"> http://stackoverflow.com/questions/57483/what-are-the-differences-between-<br>pointer-variable-and-reference-variable-in-c
</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://lantianjialiang.github.io/2014/01/06/17920375/" data-id="cjfdmr94s003eyo9fr68xsni4" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-17920329" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/01/06/17920329/" class="article-date">
  <time datetime="2014-01-06T08:26:44.000Z" itemprop="datePublished">2014-01-06</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/计算机相关/">计算机相关</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/01/06/17920329/">如何在Linux下跑UI测试，但是不打扰你的工作/Run UI tests in the background on Linux</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>一句话，起点vncserver，使用vncviewer连上去，跑你自己的UI测试就可以了。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://lantianjialiang.github.io/2014/01/06/17920329/" data-id="cjfdmr94s003cyo9f0xg76m7i" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-17920171" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/01/06/17920171/" class="article-date">
  <time datetime="2014-01-06T08:24:31.000Z" itemprop="datePublished">2014-01-06</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/C-C-Linux/">C/C++/Linux</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/01/06/17920171/">如何编译opencv</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>1. 从opencv的官网下载source，然后编译，安装；</p>
<p>2. 编写你的opencv code</p>
<p>3. 使用以下命令来编译：</p>
<p><strong>g++ -I/YouIncludePath/usr/include -L/YouLibPath/usr/lib64 -lopencv_calib3d<br>-lopencv_contrib -lopencv_core -lopencv_features2d -lopencv_flann -lopencv_gpu<br>-lopencv_highgui -lopencv_imgproc -lopencv_legacy -lopencv_ml -lopencv_nonfree<br>-lopencv_objdetect -lopencv_photo -lopencv_stitching -lopencv_superres<br>-lopencv_ts -lopencv_video -lopencv_videostab YouTest.cpp</strong>  </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://lantianjialiang.github.io/2014/01/06/17920171/" data-id="cjfdmr94s003ayo9fydv1n36a" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-17920071" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/01/06/17920071/" class="article-date">
  <time datetime="2014-01-06T08:19:16.000Z" itemprop="datePublished">2014-01-06</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/C-C-Linux/">C/C++/Linux</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/01/06/17920071/">在opencv中，如何获得contour所包围的范围内的值</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>如果你想使用opencv区分边界的话，可以使用findContours，但是在确认边界后，</p>
<p>你又想知道边界里面或者外面是什么，你可以使用pointPolygonTest方法来判断。</p>
<p>如下例子：  </p>
<pre><code>cv::Point2f findPointInContour(cv::Rect&amp; rect, std::vector&lt; cv::Point &gt; contour)
{
  cv::Point2f onTheEdge1;
  int where = 0;

  for (int i = rect.x; i &lt; rect.x + rect.width; i++) {
    for (int j = rect.y; j &lt; rect.y + rect.height; j++) {
      where = (int) (cv::pointPolygonTest(contour, cv::Point2f(i, j), false));

      //cout &lt;&lt; &quot;x = &quot; &lt;&lt; i &lt;&lt; &quot; y = &quot; &lt;&lt; j &lt;&lt; &quot;distance &quot; &lt;&lt; where &lt;&lt; endl;
      if (where &gt; 0) { //inside
        return cv::Point2f(i, j);
      } else if (where == 0) { //on the edge
        onTheEdge1 = cv::Point2f(i, j);
      }
    }
  }

  return onTheEdge1;
}
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://lantianjialiang.github.io/2014/01/06/17920071/" data-id="cjfdmr94s0038yo9fbv7cf6jj" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-17919397" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/01/06/17919397/" class="article-date">
  <time datetime="2014-01-06T08:16:01.000Z" itemprop="datePublished">2014-01-06</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/C-C-Linux/">C/C++/Linux</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/01/06/17919397/">opencv中的findContours的使用</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>1. findContours对0包围1的情况，会找出1来。</p>
<p>例如：</p>
<p>0,0,0</p>
<p>0,1,0</p>
<p>0,0,0 找出来的contour是1,1.</p>
<p>2. findContours对1包围0的情况，会找出0周围的点来。</p>
<p>1,1,1</p>
<p>1,0,1</p>
<p>1,1,1 找出来的contour是1,0;2,1;1,2;0,1</p>
<p>3. findContours会将传入的矩阵中的非零值设置成1，零值设置成0，找出相应的contour。</p>
<p>4. 以下是一个打印处所有contour的例子：</p>
<pre><code>#include &quot;opencv2/imgproc/imgproc.hpp&quot;
#include &quot;opencv2/highgui/highgui.hpp&quot;
#include &quot;opencv/cv.h&quot;
#include &lt;iostream&gt;

using namespace std;
using namespace cv;

void printContours(Mat &amp; mat, Mat&amp; copy);

int main(char* args) {
  int length = 15;
  int border3 = 3;
  int border1 = 1;
  Mat mat1(length, length, CV_8UC1, Scalar::all(1));
  Mat mat2(length, length, CV_8UC1, Scalar::all(0));

  Mat mat3(length, length, CV_8UC1, Scalar::all(1));
  mat2.at&lt; unsigned char &gt;(2,2) = 0;

    cout &lt;&lt; &quot;mat2 = &quot;&lt;&lt; endl &lt;&lt; &quot; &quot;  &lt;&lt; mat2 &lt;&lt; endl &lt;&lt; endl;
    Mat copy = mat2.clone();
    printContours(mat2, copy);
}

void printContours(Mat &amp; mat, Mat&amp; copy) {
  /// Find contours
  vector&lt;vector&lt;Point&gt; &gt; contours;
  vector&lt;Vec4i&gt; hierarchy;
  findContours( mat, contours, hierarchy, RETR_TREE, CV_CHAIN_APPROX_SIMPLE);

  int contourSize = contours.size();
  for(int i = 0; i &lt; contourSize; i++) {
    cout &lt;&lt; &quot;contours = &quot;&lt;&lt; endl &lt;&lt; &quot; &quot;  &lt;&lt; contours[i] &lt;&lt; endl &lt;&lt; endl;

    Rect rect = cv::boundingRect(contours[i]);
    cout &lt;&lt; &quot;rect = &quot;&lt;&lt; endl &lt;&lt; &quot; &quot;  &lt;&lt; rect &lt;&lt; endl &lt;&lt; endl;

    double area = cv::contourArea(contours[i], true);
    cout &lt;&lt; &quot;area = &quot;&lt;&lt; endl &lt;&lt; &quot; &quot;  &lt;&lt; area &lt;&lt; endl &lt;&lt; endl;

  }

  int hierarchySize = hierarchy.size();
  for(int i = 0; i &lt; hierarchySize; i ++) {
    cout &lt;&lt; &quot;hierarchy = &quot;&lt;&lt; endl &lt;&lt; &quot; &quot;  &lt;&lt; hierarchy[i] &lt;&lt; endl &lt;&lt; endl;
  }

  cout &lt;&lt; &quot;mat = &quot;&lt;&lt; endl &lt;&lt; &quot; &quot;  &lt;&lt; mat &lt;&lt; endl &lt;&lt; endl;
}
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://lantianjialiang.github.io/2014/01/06/17919397/" data-id="cjfdmr94s0036yo9flqdntg38" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-17919221" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/01/06/17919221/" class="article-date">
  <time datetime="2014-01-06T07:47:05.000Z" itemprop="datePublished">2014-01-06</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/C-C-Linux/">C/C++/Linux</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/01/06/17919221/">创建opencv Matrix时候的type</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>opencv matrix type:<br>CV_[The number of bits per item][Signed or Unsigned][Type Prefix]C[The channel<br>number]<br>CV_<bit-depth>{U|S|F}C(&lt;number_of_channels&gt;)  </bit-depth></p>
<p>M1 with one channel =<br>[255, 255;<br>255, 255]  </p>
<p>M2 with two channel =<br>[0, 255, 0, 255;<br>0, 255, 0, 255]  </p>
<p>M3 with three channel =<br>[0, 0, 255, 0, 0, 255;<br>0, 0, 255, 0, 0, 255]  </p>
<pre><code>#include &quot;opencv/cv.h&quot;
#include &lt;iostream&gt;

using namespace std;
using namespace cv;

int main(char* args) {
  Mat M1(2,2, CV_8UC1, 255);
  Mat M2(2,2, CV_8UC2, Scalar(0,255));
  Mat M3(2,2, CV_8UC3, Scalar(0,0,255));

  cout &lt;&lt; &quot;M1 with one channel = &quot;&lt;&lt; endl &lt;&lt; &quot; &quot;  &lt;&lt; M1 &lt;&lt; endl &lt;&lt; endl;
  cout &lt;&lt; &quot;M2 with two channel = &quot;&lt;&lt; endl &lt;&lt; &quot; &quot;  &lt;&lt; M2 &lt;&lt; endl &lt;&lt; endl;
  cout &lt;&lt; &quot;M3 with three channel = &quot;&lt;&lt; endl &lt;&lt; &quot; &quot;  &lt;&lt; M3 &lt;&lt; endl &lt;&lt; endl;

  M1.create(4,4, CV_8UC(2));
  cout &lt;&lt; &quot;M1 = &quot;&lt;&lt; endl &lt;&lt; &quot; &quot;  &lt;&lt; M1 &lt;&lt; endl &lt;&lt; endl;

  Scalar s1(1);
  Scalar s2(1, 2);
  Scalar s3(1, 2, 3);
  Scalar s4(1, 2, 3, 4);
  Scalar s5(1, 2, 3, 5);
//  Scalar s(1, 2, 3, 5, 6, 7, 8, 9);
  cout &lt;&lt; &quot;scalar s1 &quot;&lt;&lt; endl &lt;&lt; &quot; &quot;  &lt;&lt; s1 &lt;&lt; endl &lt;&lt; endl;
  cout &lt;&lt; &quot;scalar s2 &quot;&lt;&lt; endl &lt;&lt; &quot; &quot;  &lt;&lt; s2 &lt;&lt; endl &lt;&lt; endl;
  cout &lt;&lt; &quot;scalar s3 &quot;&lt;&lt; endl &lt;&lt; &quot; &quot;  &lt;&lt; s3 &lt;&lt; endl &lt;&lt; endl;
  cout &lt;&lt; &quot;scalar s4 &quot;&lt;&lt; endl &lt;&lt; &quot; &quot;  &lt;&lt; s4 &lt;&lt; endl &lt;&lt; endl;
  cout &lt;&lt; &quot;scalar s5 &quot;&lt;&lt; endl &lt;&lt; &quot; &quot;  &lt;&lt; s5 &lt;&lt; endl &lt;&lt; endl;
//  cout &lt;&lt; &quot;scalar s5 &quot;&lt;&lt; endl &lt;&lt; &quot; &quot;  &lt;&lt; s &lt;&lt; endl &lt;&lt; endl;

}
</code></pre><p><a href="http://stackoverflow.com/questions/8377091/what-are-the-differences-between-
cv-8u-and-cv-32f-and-what-should-i-worry-about" target="_blank" rel="noopener"> http://stackoverflow.com/questions/8377091/what-are-the-differences-between-<br>cv-8u-and-cv-32f-and-what-should-i-worry-about
</a><br><a href="http://docs.opencv.org/java/org/opencv/core/CvType.html" target="_blank" rel="noopener"> http://docs.opencv.org/java/org/opencv/core/CvType.html
</a>  </p>
<p>注释: 只有二位的matrix可以打印，多维的话，你自己需要写输出方法</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://lantianjialiang.github.io/2014/01/06/17919221/" data-id="cjfdmr94s0034yo9f8b0gtxau" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-17299625" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2013/12/13/17299625/" class="article-date">
  <time datetime="2013-12-13T03:33:39.000Z" itemprop="datePublished">2013-12-13</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/C-C-Linux/">C/C++/Linux</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/12/13/17299625/">ssh远程linux机器时，如何启动X11转发</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>X11 forwarding needs to be enabled on both the <strong>client side and the server<br>side.</strong>  </p>
<p>On the client side, the -X (capital X) option to ssh enables X11 forwarding,<br>and you can make this the default (for all connections or for a specific<br>conection) with ForwardX11 yes in ~/.ssh/config.  </p>
<p>On the server side, X11Forwarding yes must specified in /etc/ssh/sshd_config.<br>Note that the default is no forwarding (some distributions turn it on in their<br>default /etc/ssh/sshd_config), and that the user cannot override this setting.  </p>
<p>The xauth program must be installed on the server side. If there are any X11<br>programs there, it’s very likely that xauth will be there. In the unlikely<br>case xauth was installed in a nonstandard location, it can be called through<br>~/.ssh/rc (on the server!).  </p>
<p>Note that you do not need to set any environment variables on the server.<br>DISPLAY and XAUTHORITY will automatically be set to their proper values. If<br>you run ssh and DISPLAY is not set, it means ssh is not forwarding the X11<br>connection.  </p>
<p>To confirm that ssh is forwarding X11, check for a line containing Requesting<br>X11 forwarding in the <strong>ssh -v -X</strong> output. Note that the server won’t reply<br>either way.  </p>
<p><a href="http://unix.stackexchange.com/questions/12755/how-to-
forward-x-over-ssh-from-ubuntu-machine" target="_blank" rel="noopener"> http://unix.stackexchange.com/questions/12755/how-to-forward-x-over-ssh-<br>from-ubuntu-machine </a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://lantianjialiang.github.io/2013/12/13/17299625/" data-id="cjfdmr94s0030yo9fue6b2ewa" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-17025777" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2013/11/29/17025777/" class="article-date">
  <time datetime="2013-11-29T07:49:32.000Z" itemprop="datePublished">2013-11-29</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/JS/">JS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/11/29/17025777/">javascript中的document.getDocumentById返还null</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>1. 背景</p>
<p>我想做一个起点自动投推荐票的firefox插件，希望插件自己点击投推荐票dialog中的提交button，</p>
<p>但是我使用document.getDocumentById一直返回的是null，然后我就查找原因。</p>
<p>2.<br>最后发现投推荐票的dialog是用iframe实现的，但是当前的页面属于另外一个iframe，它的document中根本没有提交button的id（btn_OK）。</p>
<p>所以只能对当前所有的frame进行遍历，一个一个的找，如果找到的话调用click方法就好了，以下是方法的原型：</p>
<pre><code>var targetId = &quot;btn_OK&quot;
var target = document.getElementById(targetId);
if(target != null) {
    //do something
}
var iframes = document.getElementsByTagName(&apos;iframe&apos;); //all iframes on page
console.log(&quot;total frame &quot; + iframes.length);
var errCount = 0;
for(var i=0; i&lt;iframes.length; i++){
    console.log(&quot;current frame is: &quot; + iframes[i]);
    var iframeDocument;
    try {
        iframeDocument = iframes[i].contentDocument || iframes[i].contentWindow.document;
        target = iframeDocument.getElementById(targetId);
        console.log(target);
        }
    catch (err){
        errCount ++;
        console.log(err);
    }    
}
</code></pre><p>因为不同的iframe有可能是不同的domain的，所有需要try catch。  </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://lantianjialiang.github.io/2013/11/29/17025777/" data-id="cjfdmr94s002yyo9fpp1lju50" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-16861573" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2013/11/21/16861573/" class="article-date">
  <time datetime="2013-11-21T07:21:54.000Z" itemprop="datePublished">2013-11-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Java/">Java</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/11/21/16861573/">在Java中如何通过反射找到一个变量，这个变量的类型是指定的类型</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>1. 说明以下的代码是我从Spring中抓出来的，然后加了一些我认为对自己有用的方法。</p>
<p>2. 直接上代码，看不懂的请留言。</p>
<p>3. 如何解决标题中提到的问题呢？请查找findAllField方法。  </p>
<p>ReflectionUtils.java</p>
<pre><code>package test.util;

/*
 * Copyright 2002-2013 the original author or authors.
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

import java.lang.reflect.Constructor;
import java.lang.reflect.Field;
import java.lang.reflect.InvocationTargetException;
import java.lang.reflect.Method;
import java.lang.reflect.Modifier;
import java.lang.reflect.UndeclaredThrowableException;
import java.sql.SQLException;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

import org.eclipse.core.runtime.Assert;

/**
 * Simple utility class for working with the reflection API and handling
 * reflection exceptions.
 *
 * &lt;p&gt;Only intended for internal use.
 *
 * @author Juergen Hoeller
 * @author Rob Harrop
 * @author Rod Johnson
 * @author Costin Leau
 * @author Sam Brannen
 * @author Chris Beams
 * @author Roy Clarkson
 * @author jialiang
 * @since 1.1
 */
public abstract class ReflectionUtils {

    /**
     * Attempt to find a {@link Field field} on the supplied {@link Class} with the
     * supplied &lt;code&gt;name&lt;/code&gt;. Searches all superclasses up to {@link Object}.
     * @param clazz the class to introspect
     * @param name the name of the field
     * @return the corresponding Field object, or &lt;code&gt;null&lt;/code&gt; if not found
     */
    public static Field findField(Class&lt;?&gt; clazz, String name) {
        return findField(clazz, name, null);
    }

    /**
     * Attempt to find a {@link Field field} on the supplied {@link Class} with the
     * supplied &lt;code&gt;name&lt;/code&gt; and/or {@link Class type}. Searches all superclasses
     * up to {@link Object}.
     * @param clazz the class to introspect
     * @param name the name of the field (may be &lt;code&gt;null&lt;/code&gt; if type is specified)
     * @param type the type of the field (may be &lt;code&gt;null&lt;/code&gt; if name is specified)
     * @return the corresponding Field object, or &lt;code&gt;null&lt;/code&gt; if not found
     */
    public static Field findField(Class&lt;?&gt; clazz, String name, Class&lt;?&gt; type) {
        Assert.isNotNull(clazz, &quot;Class must not be null&quot;);
        Assert.isTrue(name != null || type != null, &quot;Either name or type of the field must be specified&quot;);
        Class&lt;?&gt; searchType = clazz;
        while (!Object.class.equals(searchType) &amp;&amp; searchType != null) {
            Field[] fields = searchType.getDeclaredFields();
            for (Field field : fields) {
                if ((name == null || name.equals(field.getName())) &amp;&amp; (type == null || type.equals(field.getType()))) {
                    return field;
                }
            }
            searchType = searchType.getSuperclass();
        }
        return null;
    }

    /**
     * Attempt to find a {@link Field field} on the supplied {@link Class} with the
     * supplied &lt;code&gt;name&lt;/code&gt; and/or {@link Class type}. Searches all superclasses
     * up to {@link Object}.
     * @param clazz the class to introspect
     * @param name the name of the field (may be &lt;code&gt;null&lt;/code&gt; if type is specified)
     * @param type the type of the field, must not be &lt;code&gt;null&lt;/code&gt;
     * @return the corresponding Field object, or &lt;code&gt;null&lt;/code&gt; if not found
     */
    public static List&lt;Field&gt; findAllField(Class&lt;?&gt; clazz, String name, Class&lt;?&gt; type) {        
        Assert.isNotNull(clazz, &quot;Class must not be null&quot;);
        Assert.isNotNull(type, &quot;The type of filed must not be null&quot;);

        List&lt;Field&gt; list = new ArrayList&lt;Field&gt;();
        Class&lt;?&gt; searchType = clazz;

        while (!Object.class.equals(searchType) &amp;&amp; searchType != null) {
            Field[] fields = searchType.getDeclaredFields();
            for (Field field : fields) {
                if ((name == null || name.equals(field.getName())) &amp;&amp; type.equals(field.getType())) {
                    list.add(field);
                }
            }
            searchType = searchType.getSuperclass();
        }
        return list;
    }

    public static List&lt;Field&gt; findAllField(Class&lt;?&gt; clazz, Class&lt;?&gt; type) {        
        return findAllField(clazz, null, type);
    }

    /**
     * Set the field represented by the supplied {@link Field field object} on the
     * specified {@link Object target object} to the specified &lt;code&gt;value&lt;/code&gt;.
     * In accordance with {@link Field#set(Object, Object)} semantics, the new value
     * is automatically unwrapped if the underlying field has a primitive type.
     * &lt;p&gt;Thrown exceptions are handled via a call to {@link #handleReflectionException(Exception)}.
     * @param field the field to set
     * @param target the target object on which to set the field
     * @param value the value to set; may be &lt;code&gt;null&lt;/code&gt;
     */
    public static void setField(Field field, Object target, Object value) {
        try {
            field.set(target, value);
        }
        catch (IllegalAccessException ex) {
            handleReflectionException(ex);
            throw new IllegalStateException(&quot;Unexpected reflection exception - &quot; + ex.getClass().getName() + &quot;: &quot;
                    + ex.getMessage());
        }
    }

    /**
     * Get the field represented by the supplied {@link Field field object} on the
     * specified {@link Object target object}. In accordance with {@link Field#get(Object)}
     * semantics, the returned value is automatically wrapped if the underlying field
     * has a primitive type.
     * &lt;p&gt;Thrown exceptions are handled via a call to {@link #handleReflectionException(Exception)}.
     * @param field the field to get
     * @param target the target object from which to get the field
     * @return the field&apos;s current value
     */
    public static Object getField(Field field, Object target) {
        try {
            field.setAccessible(true);
            return field.get(target);
        }
        catch (IllegalAccessException ex) {
            handleReflectionException(ex);
            throw new IllegalStateException(
                    &quot;Unexpected reflection exception - &quot; + ex.getClass().getName() + &quot;: &quot; + ex.getMessage());
        }
    }

    public static Object getField(String fieldName, Object target) {
        Field field = findField(target.getClass(), fieldName);
        if(field == null) {
            return null;
        }

        try {
            field.setAccessible(true);
            return field.get(target);
        }
        catch (IllegalAccessException ex) {
            handleReflectionException(ex);
            throw new IllegalStateException(
                    &quot;Unexpected reflection exception - &quot; + ex.getClass().getName() + &quot;: &quot; + ex.getMessage());
        }
    }

    /**
     * Attempt to find a {@link Method} on the supplied class with the supplied name
     * and no parameters. Searches all superclasses up to &lt;code&gt;Object&lt;/code&gt;.
     * &lt;p&gt;Returns &lt;code&gt;null&lt;/code&gt; if no {@link Method} can be found.
     * @param clazz the class to introspect
     * @param name the name of the method
     * @return the Method object, or &lt;code&gt;null&lt;/code&gt; if none found
     */
    public static Method findMethod(Class&lt;?&gt; clazz, String name) {
        return findMethod(clazz, name, new Class[0]);
    }

    public static Object invokeMethod(Object target, String name) {
        Assert.isNotNull(target, &quot;target must not be null&quot;);
        Assert.isNotNull(name, &quot;Method name must not be null&quot;);

        Method m = findMethod(target.getClass(), name);
        if(m == null) {
            return null;
        }

        makeAccessible(m);

        return invokeMethod(m, target);
    }

    public static Object invokeMethod(Object target, String name,  Object... args) {
        Assert.isNotNull(target, &quot;target must not be null&quot;);
        Assert.isNotNull(name, &quot;Method name must not be null&quot;);

        Method m = findMethod(target.getClass(), name);
        if(m == null) {
            return null;
        }

        return invokeMethod(m, target, args);
    }

    /**
     * Attempt to find a {@link Method} on the supplied class with the supplied name
     * and parameter types. Searches all superclasses up to &lt;code&gt;Object&lt;/code&gt;.
     * &lt;p&gt;Returns &lt;code&gt;null&lt;/code&gt; if no {@link Method} can be found.
     * @param clazz the class to introspect
     * @param name the name of the method
     * @param paramTypes the parameter types of the method
     * (may be &lt;code&gt;null&lt;/code&gt; to indicate any signature)
     * @return the Method object, or &lt;code&gt;null&lt;/code&gt; if none found
     */
    public static Method findMethod(Class&lt;?&gt; clazz, String name, Class&lt;?&gt;... paramTypes) {
        Assert.isNotNull(clazz, &quot;Class must not be null&quot;);
        Assert.isNotNull(name, &quot;Method name must not be null&quot;);
        Class&lt;?&gt; searchType = clazz;
        while (searchType != null) {
            Method[] methods = (searchType.isInterface() ? searchType.getMethods() : searchType.getDeclaredMethods());
            for (Method method : methods) {
                if (name.equals(method.getName())
                        &amp;&amp; (paramTypes == null || Arrays.equals(paramTypes, method.getParameterTypes()))) {
                    return method;
                }
            }
            searchType = searchType.getSuperclass();
        }
        return null;
    }

    /**
     * Invoke the specified {@link Method} against the supplied target object with no arguments.
     * The target object can be &lt;code&gt;null&lt;/code&gt; when invoking a static {@link Method}.
     * &lt;p&gt;Thrown exceptions are handled via a call to {@link #handleReflectionException}.
     * @param method the method to invoke
     * @param target the target object to invoke the method on
     * @return the invocation result, if any
     * @see #invokeMethod(java.lang.reflect.Method, Object, Object[])
     */
    public static Object invokeMethod(Method method, Object target) {
        return invokeMethod(method, target, new Object[0]);
    }

    /**
     * Invoke the specified {@link Method} against the supplied target object with the
     * supplied arguments. The target object can be &lt;code&gt;null&lt;/code&gt; when invoking a
     * static {@link Method}.
     * &lt;p&gt;Thrown exceptions are handled via a call to {@link #handleReflectionException}.
     * @param method the method to invoke
     * @param target the target object to invoke the method on
     * @param args the invocation arguments (may be &lt;code&gt;null&lt;/code&gt;)
     * @return the invocation result, if any
     */
    public static Object invokeMethod(Method method, Object target, Object... args) {
        try {
            return method.invoke(target, args);
        }
        catch (Exception ex) {
            handleReflectionException(ex);
        }
        throw new IllegalStateException(&quot;Should never get here&quot;);
    }

    /**
     * Invoke the specified JDBC API {@link Method} against the supplied target
     * object with no arguments.
     * @param method the method to invoke
     * @param target the target object to invoke the method on
     * @return the invocation result, if any
     * @throws SQLException the JDBC API SQLException to rethrow (if any)
     * @see #invokeJdbcMethod(java.lang.reflect.Method, Object, Object[])
     */
    public static Object invokeJdbcMethod(Method method, Object target) throws SQLException {
        return invokeJdbcMethod(method, target, new Object[0]);
    }

    /**
     * Invoke the specified JDBC API {@link Method} against the supplied target
     * object with the supplied arguments.
     * @param method the method to invoke
     * @param target the target object to invoke the method on
     * @param args the invocation arguments (may be &lt;code&gt;null&lt;/code&gt;)
     * @return the invocation result, if any
     * @throws SQLException the JDBC API SQLException to rethrow (if any)
     * @see #invokeMethod(java.lang.reflect.Method, Object, Object[])
     */
    public static Object invokeJdbcMethod(Method method, Object target, Object... args) throws SQLException {
        try {
            return method.invoke(target, args);
        }
        catch (IllegalAccessException ex) {
            handleReflectionException(ex);
        }
        catch (InvocationTargetException ex) {
            if (ex.getTargetException() instanceof SQLException) {
                throw (SQLException) ex.getTargetException();
            }
            handleInvocationTargetException(ex);
        }
        throw new IllegalStateException(&quot;Should never get here&quot;);
    }

    /**
     * Handle the given reflection exception. Should only be called if no
     * checked exception is expected to be thrown by the target method.
     * &lt;p&gt;Throws the underlying RuntimeException or Error in case of an
     * InvocationTargetException with such a root cause. Throws an
     * IllegalStateException with an appropriate message else.
     * @param ex the reflection exception to handle
     */
    public static void handleReflectionException(Exception ex) {
        if (ex instanceof NoSuchMethodException) {
            throw new IllegalStateException(&quot;Method not found: &quot; + ex.getMessage());
        }
        if (ex instanceof IllegalAccessException) {
            throw new IllegalStateException(&quot;Could not access method: &quot; + ex.getMessage());
        }
        if (ex instanceof InvocationTargetException) {
            handleInvocationTargetException((InvocationTargetException) ex);
        }
        if (ex instanceof RuntimeException) {
            throw (RuntimeException) ex;
        }
        throw new UndeclaredThrowableException(ex);
    }

    /**
     * Handle the given invocation target exception. Should only be called if no
     * checked exception is expected to be thrown by the target method.
     * &lt;p&gt;Throws the underlying RuntimeException or Error in case of such a root
     * cause. Throws an IllegalStateException else.
     * @param ex the invocation target exception to handle
     */
    public static void handleInvocationTargetException(InvocationTargetException ex) {
        rethrowRuntimeException(ex.getTargetException());
    }

    /**
     * Rethrow the given {@link Throwable exception}, which is presumably the
     * &lt;em&gt;target exception&lt;/em&gt; of an {@link InvocationTargetException}. Should
     * only be called if no checked exception is expected to be thrown by the
     * target method.
     * &lt;p&gt;Rethrows the underlying exception cast to an {@link RuntimeException} or
     * {@link Error} if appropriate; otherwise, throws an
     * {@link IllegalStateException}.
     * @param ex the exception to rethrow
     * @throws RuntimeException the rethrown exception
     */
    public static void rethrowRuntimeException(Throwable ex) {
        if (ex instanceof RuntimeException) {
            throw (RuntimeException) ex;
        }
        if (ex instanceof Error) {
            throw (Error) ex;
        }
        throw new UndeclaredThrowableException(ex);
    }

    /**
     * Rethrow the given {@link Throwable exception}, which is presumably the
     * &lt;em&gt;target exception&lt;/em&gt; of an {@link InvocationTargetException}. Should
     * only be called if no checked exception is expected to be thrown by the
     * target method.
     * &lt;p&gt;Rethrows the underlying exception cast to an {@link Exception} or
     * {@link Error} if appropriate; otherwise, throws an
     * {@link IllegalStateException}.
     * @param ex the exception to rethrow
     * @throws Exception the rethrown exception (in case of a checked exception)
     */
    public static void rethrowException(Throwable ex) throws Exception {
        if (ex instanceof Exception) {
            throw (Exception) ex;
        }
        if (ex instanceof Error) {
            throw (Error) ex;
        }
        throw new UndeclaredThrowableException(ex);
    }

    /**
     * Determine whether the given method explicitly declares the given
     * exception or one of its superclasses, which means that an exception of
     * that type can be propagated as-is within a reflective invocation.
     * @param method the declaring method
     * @param exceptionType the exception to throw
     * @return &lt;code&gt;true&lt;/code&gt; if the exception can be thrown as-is;
     * &lt;code&gt;false&lt;/code&gt; if it needs to be wrapped
     */
    public static boolean declaresException(Method method, Class&lt;?&gt; exceptionType) {
        Assert.isNotNull(method, &quot;Method must not be null&quot;);
        Class&lt;?&gt;[] declaredExceptions = method.getExceptionTypes();
        for (Class&lt;?&gt; declaredException : declaredExceptions) {
            if (declaredException.isAssignableFrom(exceptionType)) {
                return true;
            }
        }
        return false;
    }

    /**
     * Determine whether the given field is a &quot;public static final&quot; constant.
     * @param field the field to check
     */
    public static boolean isPublicStaticFinal(Field field) {
        int modifiers = field.getModifiers();
        return (Modifier.isPublic(modifiers) &amp;&amp; Modifier.isStatic(modifiers) &amp;&amp; Modifier.isFinal(modifiers));
    }

    /**
     * Determine whether the given method is an &quot;equals&quot; method.
     * @see java.lang.Object#equals(Object)
     */
    public static boolean isEqualsMethod(Method method) {
        if (method == null || !method.getName().equals(&quot;equals&quot;)) {
            return false;
        }
        Class&lt;?&gt;[] paramTypes = method.getParameterTypes();
        return (paramTypes.length == 1 &amp;&amp; paramTypes[0] == Object.class);
    }

    /**
     * Determine whether the given method is a &quot;hashCode&quot; method.
     * @see java.lang.Object#hashCode()
     */
    public static boolean isHashCodeMethod(Method method) {
        return (method != null &amp;&amp; method.getName().equals(&quot;hashCode&quot;) &amp;&amp; method.getParameterTypes().length == 0);
    }

    /**
     * Determine whether the given method is a &quot;toString&quot; method.
     * @see java.lang.Object#toString()
     */
    public static boolean isToStringMethod(Method method) {
        return (method != null &amp;&amp; method.getName().equals(&quot;toString&quot;) &amp;&amp; method.getParameterTypes().length == 0);
    }

    /**
     * Determine whether the given method is originally declared by {@link java.lang.Object}.
     */
    public static boolean isObjectMethod(Method method) {
        try {
            Object.class.getDeclaredMethod(method.getName(), method.getParameterTypes());
            return true;
        } catch (SecurityException ex) {
            return false;
        } catch (NoSuchMethodException ex) {
            return false;
        }
    }

    /**
     * Make the given field accessible, explicitly setting it accessible if
     * necessary. The &lt;code&gt;setAccessible(true)&lt;/code&gt; method is only called
     * when actually necessary, to avoid unnecessary conflicts with a JVM
     * SecurityManager (if active).
     * @param field the field to make accessible
     * @see java.lang.reflect.Field#setAccessible
     */
    public static void makeAccessible(Field field) {
        if ((!Modifier.isPublic(field.getModifiers()) || !Modifier.isPublic(field.getDeclaringClass().getModifiers()) ||
                Modifier.isFinal(field.getModifiers())) &amp;&amp; !field.isAccessible()) {
            field.setAccessible(true);
        }
    }

    /**
     * Make the given method accessible, explicitly setting it accessible if
     * necessary. The &lt;code&gt;setAccessible(true)&lt;/code&gt; method is only called
     * when actually necessary, to avoid unnecessary conflicts with a JVM
     * SecurityManager (if active).
     * @param method the method to make accessible
     * @see java.lang.reflect.Method#setAccessible
     */
    public static void makeAccessible(Method method) {
        if ((!Modifier.isPublic(method.getModifiers()) || !Modifier.isPublic(method.getDeclaringClass().getModifiers()))
                &amp;&amp; !method.isAccessible()) {
            method.setAccessible(true);
        }
    }

    /**
     * Make the given constructor accessible, explicitly setting it accessible
     * if necessary. The &lt;code&gt;setAccessible(true)&lt;/code&gt; method is only called
     * when actually necessary, to avoid unnecessary conflicts with a JVM
     * SecurityManager (if active).
     * @param ctor the constructor to make accessible
     * @see java.lang.reflect.Constructor#setAccessible
     */
    public static void makeAccessible(Constructor&lt;?&gt; ctor) {
        if ((!Modifier.isPublic(ctor.getModifiers()) || !Modifier.isPublic(ctor.getDeclaringClass().getModifiers()))
                &amp;&amp; !ctor.isAccessible()) {
            ctor.setAccessible(true);
        }
    }

    /**
     * Perform the given callback operation on all matching methods of the given
     * class and superclasses.
     * &lt;p&gt;The same named method occurring on subclass and superclass will appear
     * twice, unless excluded by a {@link MethodFilter}.
     * @param clazz class to start looking at
     * @param mc the callback to invoke for each method
     * @see #doWithMethods(Class, MethodCallback, MethodFilter)
     */
    public static void doWithMethods(Class&lt;?&gt; clazz, MethodCallback mc) throws IllegalArgumentException {
        doWithMethods(clazz, mc, null);
    }

    /**
     * Perform the given callback operation on all matching methods of the given
     * class and superclasses (or given interface and super-interfaces).
     * &lt;p&gt;The same named method occurring on subclass and superclass will appear
     * twice, unless excluded by the specified {@link MethodFilter}.
     * @param clazz class to start looking at
     * @param mc the callback to invoke for each method
     * @param mf the filter that determines the methods to apply the callback to
     */
    public static void doWithMethods(Class&lt;?&gt; clazz, MethodCallback mc, MethodFilter mf)
            throws IllegalArgumentException {

        // Keep backing up the inheritance hierarchy.
        Method[] methods = clazz.getDeclaredMethods();
        for (Method method : methods) {
            if (mf != null &amp;&amp; !mf.matches(method)) {
                continue;
            }
            try {
                mc.doWith(method);
            }
            catch (IllegalAccessException ex) {
                throw new IllegalStateException(&quot;Shouldn&apos;t be illegal to access method &apos;&quot; + method.getName()
                        + &quot;&apos;: &quot; + ex);
            }
        }
        if (clazz.getSuperclass() != null) {
            doWithMethods(clazz.getSuperclass(), mc, mf);
        }
        else if (clazz.isInterface()) {
            for (Class&lt;?&gt; superIfc : clazz.getInterfaces()) {
                doWithMethods(superIfc, mc, mf);
            }
        }
    }

    /**
     * Get all declared methods on the leaf class and all superclasses. Leaf
     * class methods are included first.
     */
    public static Method[] getAllDeclaredMethods(Class&lt;?&gt; leafClass) throws IllegalArgumentException {
        final List&lt;Method&gt; methods = new ArrayList&lt;Method&gt;(32);
        doWithMethods(leafClass, new MethodCallback() {
            public void doWith(Method method) {
                methods.add(method);
            }
        });
        return methods.toArray(new Method[methods.size()]);
    }

    /**
     * Get the unique set of declared methods on the leaf class and all superclasses. Leaf
     * class methods are included first and while traversing the superclass hierarchy any methods found
     * with signatures matching a method already included are filtered out.
     */
    public static Method[] getUniqueDeclaredMethods(Class&lt;?&gt; leafClass) throws IllegalArgumentException {
        final List&lt;Method&gt; methods = new ArrayList&lt;Method&gt;(32);
        doWithMethods(leafClass, new MethodCallback() {
            public void doWith(Method method) {
                Method methodBeingOverriddenWithCovariantReturnType = null;

                for (Method existingMethod : methods) {
                    if (method.getName().equals(existingMethod.getName()) &amp;&amp;
                            Arrays.equals(method.getParameterTypes(), existingMethod.getParameterTypes())) {
                        // is this a covariant return type situation?
                        if (existingMethod.getReturnType() != method.getReturnType() &amp;&amp;
                                existingMethod.getReturnType().isAssignableFrom(method.getReturnType())) {
                            methodBeingOverriddenWithCovariantReturnType = existingMethod;
                        }
                        break;
                    }
                }
                if (methodBeingOverriddenWithCovariantReturnType != null) {
                    methods.remove(methodBeingOverriddenWithCovariantReturnType);
                }
            }
        });
        return methods.toArray(new Method[methods.size()]);
    }

    /**
     * Invoke the given callback on all fields in the target class, going up the
     * class hierarchy to get all declared fields.
     * @param clazz the target class to analyze
     * @param fc the callback to invoke for each field
     */
    public static void doWithFields(Class&lt;?&gt; clazz, FieldCallback fc) throws IllegalArgumentException {
        doWithFields(clazz, fc, null);
    }

    /**
     * Invoke the given callback on all fields in the target class, going up the
     * class hierarchy to get all declared fields.
     * @param clazz the target class to analyze
     * @param fc the callback to invoke for each field
     * @param ff the filter that determines the fields to apply the callback to
     */
    public static void doWithFields(Class&lt;?&gt; clazz, FieldCallback fc, FieldFilter ff)
            throws IllegalArgumentException {

        // Keep backing up the inheritance hierarchy.
        Class&lt;?&gt; targetClass = clazz;
        do {
            Field[] fields = targetClass.getDeclaredFields();
            for (Field field : fields) {
                // Skip static and final fields.
                if (ff != null &amp;&amp; !ff.matches(field)) {
                    continue;
                }
                try {
                    fc.doWith(field);
                }
                catch (IllegalAccessException ex) {
                    throw new IllegalStateException(
                            &quot;Shouldn&apos;t be illegal to access field &apos;&quot; + field.getName() + &quot;&apos;: &quot; + ex);
                }
            }
            targetClass = targetClass.getSuperclass();
        }
        while (targetClass != null &amp;&amp; targetClass != Object.class);
    }

    /**
     * Given the source object and the destination, which must be the same class
     * or a subclass, copy all fields, including inherited fields. Designed to
     * work on objects with public no-arg constructors.
     * @throws IllegalArgumentException if the arguments are incompatible
     */
    public static void shallowCopyFieldState(final Object src, final Object dest) throws IllegalArgumentException {
        if (src == null) {
            throw new IllegalArgumentException(&quot;Source for field copy cannot be null&quot;);
        }
        if (dest == null) {
            throw new IllegalArgumentException(&quot;Destination for field copy cannot be null&quot;);
        }
        if (!src.getClass().isAssignableFrom(dest.getClass())) {
            throw new IllegalArgumentException(&quot;Destination class [&quot; + dest.getClass().getName()
                    + &quot;] must be same or subclass as source class [&quot; + src.getClass().getName() + &quot;]&quot;);
        }
        doWithFields(src.getClass(), new FieldCallback() {
            public void doWith(Field field) throws IllegalArgumentException, IllegalAccessException {
                makeAccessible(field);
                Object srcValue = field.get(src);
                field.set(dest, srcValue);
            }
        }, COPYABLE_FIELDS);
    }


    /**
     * Action to take on each method.
     */
    public interface MethodCallback {

        /**
         * Perform an operation using the given method.
         * @param method the method to operate on
         */
        void doWith(Method method) throws IllegalArgumentException, IllegalAccessException;
    }


    /**
     * Callback optionally used to filter methods to be operated on by a method callback.
     */
    public interface MethodFilter {

        /**
         * Determine whether the given method matches.
         * @param method the method to check
         */
        boolean matches(Method method);
    }


    /**
     * Callback interface invoked on each field in the hierarchy.
     */
    public interface FieldCallback {

        /**
         * Perform an operation using the given field.
         * @param field the field to operate on
         */
        void doWith(Field field) throws IllegalArgumentException, IllegalAccessException;
    }


    /**
     * Callback optionally used to filter fields to be operated on by a field callback.
     */
    public interface FieldFilter {

        /**
         * Determine whether the given field matches.
         * @param field the field to check
         */
        boolean matches(Field field);
    }


    /**
     * Pre-built FieldFilter that matches all non-static, non-final fields.
     */
    public static FieldFilter COPYABLE_FIELDS = new FieldFilter() {

        public boolean matches(Field field) {
            return !(Modifier.isStatic(field.getModifiers()) || Modifier.isFinal(field.getModifiers()));
        }
    };


    /**
     * Pre-built MethodFilter that matches all non-bridge methods.
     */
    public static MethodFilter NON_BRIDGED_METHODS = new MethodFilter() {

        public boolean matches(Method method) {
            return !method.isBridge();
        }
    };


    /**
     * Pre-built MethodFilter that matches all non-bridge methods
     * which are not declared on &lt;code&gt;java.lang.Object&lt;/code&gt;.
     */
    public static MethodFilter USER_DECLARED_METHODS = new MethodFilter() {

        public boolean matches(Method method) {
            return (!method.isBridge() &amp;&amp; method.getDeclaringClass() != Object.class);
        }
    };

}
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://lantianjialiang.github.io/2013/11/21/16861573/" data-id="cjfdmr94s0032yo9f1r6h5py5" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-16861355" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2013/11/21/16861355/" class="article-date">
  <time datetime="2013-11-21T07:16:28.000Z" itemprop="datePublished">2013-11-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Java/">Java</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/11/21/16861355/">Eclipse 4.x中Command是如何映射到Handler的</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>1. Eclipse中的Command模式，使得具体的实现和Command定义分离，便于维护。</p>
<p>但是在Debug的时候，或者没有souce code的时候，我们想知道每一个commandId对应的Handler是什么，怎么办？</p>
<p>2. 在Eclipse<br>4.x中，其实当Eclipse启动完成后，它已经创建了commandId和对应Handler的Map，保存在EclipseContext中，</p>
<p>然后通过反射调用到对应的Handler。 见下图：</p>
<p><img src="https://img-
blog.csdn.net/20131121151132031?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGFudGlhbmppYWxpYW5n/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt=""></p>
<p>Eclipse是在上图中我框出来的地方，通过commandId在EclipseContext中查找到。</p>
<p>3. 如何将EclipseContext中的Handler都dump出来呢？</p>
<p>一句话，反射。</p>
<p>注意，以下代码我只在Eclipse 4.3.0上测试通过。</p>
<pre><code>    //try to print all handler in eclipse 4.x
    result = ReflectionUtils.getField(&quot;e4Context&quot;, site);
    if(!isSuccess(result)) {
        return;
    }

    if(result instanceof IEclipseContext) {
        IEclipseContext context = (IEclipseContext)result;
        printHandlerForEclipseContext(context, 0);
    }




@SuppressWarnings(&quot;unchecked&quot;)
private void printHandlerForEclipseContext(IEclipseContext context, int step) {
    Assert.isNotNull(context);

    Object result = null;
    if(step != 0) {
        result = ReflectionUtils.getField(&quot;localValueComputations&quot;, context);
    } else {
        result = ReflectionUtils.getField(&quot;localValues&quot;, context);
    }
    if(!isSuccess(result)) {
        return;
    }

    if(result instanceof Map) {
        String stepString = makeStep(step);
        Map&lt;String, Object&gt; localValueComputations = (Map&lt;String, Object&gt;)result;
        for (String string : localValueComputations.keySet()) {
            Object object = localValueComputations.get(string);

            String last = object.toString();
            if(string.startsWith(&quot;legacy::handler::&quot;)) {
                if(object instanceof ArrayList) {
                    ArrayList list = (ArrayList)object;
                    //TODO may be more than one item in list
                    object = list.get(0);
                    if(object instanceof IHandlerActivation) {
                        IHandlerActivation activation = (IHandlerActivation)object;
                        last = activation.getHandler().toString();
                    }
                }
            }
            System.out.println(stepString + string + &quot;, &quot; + last);
        }
    }
    result = null;

    result = ReflectionUtils.invokeMethod(context, &quot;getChildren&quot;);
    if(!isSuccess(result)) {
        return;
    }

    if(result instanceof Set) {
        Set&lt;IEclipseContext&gt; children = (Set&lt;IEclipseContext&gt;)result;
        Iterator&lt;IEclipseContext&gt; iterator = children.iterator();
        IEclipseContext child = null;
        int moreStep = step + 1;
        while(iterator.hasNext()) {
            child = iterator.next();
            printHandlerForEclipseContext(child, moreStep);
        }
        step ++;
    }
}
</code></pre><p>以下是我的屏幕输出的一部分,输出格式为：commandId, Handler  </p>
<p>…</p>
<p>legacy::handler::org.eclipse.ui.edit.text.recenter,<br>ActionHandler(org.eclipse.ui.texteditor.RecenterAction@7efaa9e2)<br>legacy::handler::org.eclipse.jdt.ui.edit.text.java.search.declarations.in.hierarchy,<br>ActionHandler(org.eclipse.jdt.ui.actions.FindDeclarationsInHierarchyAction@14c26e4a)<br>legacy::handler::org.eclipse.jdt.ui.edit.text.java.search.declarations.in.project,<br>ActionHandler(org.eclipse.jdt.ui.actions.FindDeclarationsInProjectAction@174043f5)<br>legacy::handler::org.eclipse.jdt.ui.edit.text.java.surround.with.try.multicatch,<br>ActionHandler(org.eclipse.jdt.ui.actions.SurroundWithTryMultiCatchAction@49e3c996)<br>legacy::handler::org.eclipse.jdt.ui.edit.text.java.override.methods,<br>ActionHandler(org.eclipse.jdt.ui.actions.OverrideMethodsAction@11e18e8c)<br>legacy::handler:: <strong>org.eclipse.ui.edit.findPrevious</strong> , ActionHandler(<br><strong>org.eclipse.ui.texteditor.FindNextAction</strong> @69d5ee81)<br>handler::org.eclipse.jdt.ui.edit.text.java.remove.block.comment,<br>org.eclipse.ui.internal.handlers.LegacyHandlerService$HandlerSelectionFunction@207462c0</p>
<p>…  </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://lantianjialiang.github.io/2013/11/21/16861355/" data-id="cjfdmr94s002vyo9fpnx6d38g" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/23/">&laquo; 上一页</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/22/">22</a><a class="page-number" href="/page/23/">23</a><span class="page-number current">24</span><a class="page-number" href="/page/25/">25</a><a class="page-number" href="/page/26/">26</a><span class="space">&hellip;</span><a class="page-number" href="/page/62/">62</a><a class="extend next" rel="next" href="/page/25/">下一页 &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/ASP-NET/">ASP.NET</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Android/">Android</a><span class="category-list-count">29</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/C-C-Linux/">C/C++/Linux</a><span class="category-list-count">111</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Eclipse/">Eclipse</a><span class="category-list-count">36</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/English/">English</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/IC-integrated-circuit/">IC(integrated circuit)</a><span class="category-list-count">22</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/JS/">JS</a><span class="category-list-count">22</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java/">Java</a><span class="category-list-count">88</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/LTspice/">LTspice</a><span class="category-list-count">16</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/MongoDB/">MongoDB</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/PHP/">PHP</a><span class="category-list-count">22</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Thinking/">Thinking</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Web/">Web</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ruby/">ruby</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/下载-BT-ed2k/">下载(BT/ed2k)</a><span class="category-list-count">13</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/奇思妙想-创意/">奇思妙想/创意</a><span class="category-list-count">12</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/文化/">文化</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/日语/">日语</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/杂项/">杂项</a><span class="category-list-count">46</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/游戏/">游戏</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/计算机相关/">计算机相关</a><span class="category-list-count">153</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/03/13/79539959/">Locking up men does nothing more than keep them off the streets.</a>
          </li>
        
          <li>
            <a href="/2018/02/09/79300075/">how to export eclipse RCP for multiple platforms</a>
          </li>
        
          <li>
            <a href="/2017/12/06/78728268/">Mbit/s vs MB/s vs MiB/s</a>
          </li>
        
          <li>
            <a href="/2017/12/06/78728077/">如何用命令测试Linux 硬盘的读写速度</a>
          </li>
        
          <li>
            <a href="/2017/12/06/78727935/">Linux下如何查看你的disk的信息</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">三月 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">二月 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">十二月 2017</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">十一月 2017</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">十月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">九月 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">八月 2017</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">四月 2017</a><span class="archive-list-count">21</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">一月 2017</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">八月 2016</a><span class="archive-list-count">28</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">七月 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">五月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">三月 2016</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">一月 2016</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">八月 2015</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/07/">七月 2015</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/03/">三月 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/02/">二月 2015</a><span class="archive-list-count">15</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/01/">一月 2015</a><span class="archive-list-count">14</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/12/">十二月 2014</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/11/">十一月 2014</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/10/">十月 2014</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/09/">九月 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/06/">六月 2014</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/05/">五月 2014</a><span class="archive-list-count">22</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/04/">四月 2014</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/03/">三月 2014</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/02/">二月 2014</a><span class="archive-list-count">20</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/01/">一月 2014</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/12/">十二月 2013</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/11/">十一月 2013</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/10/">十月 2013</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/09/">九月 2013</a><span class="archive-list-count">21</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/08/">八月 2013</a><span class="archive-list-count">19</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/07/">七月 2013</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/06/">六月 2013</a><span class="archive-list-count">16</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/05/">五月 2013</a><span class="archive-list-count">15</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/04/">四月 2013</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/02/">二月 2013</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/01/">一月 2013</a><span class="archive-list-count">15</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/11/">十一月 2012</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/10/">十月 2012</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/09/">九月 2012</a><span class="archive-list-count">21</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/08/">八月 2012</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/07/">七月 2012</a><span class="archive-list-count">20</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/06/">六月 2012</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/05/">五月 2012</a><span class="archive-list-count">22</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/03/">三月 2012</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/02/">二月 2012</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/01/">一月 2012</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/12/">十二月 2011</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/11/">十一月 2011</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/10/">十月 2011</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/09/">九月 2011</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/08/">八月 2011</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/07/">七月 2011</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/06/">六月 2011</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/05/">五月 2011</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/04/">四月 2011</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/03/">三月 2011</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/02/">二月 2011</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/01/">一月 2011</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/12/">十二月 2010</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/11/">十一月 2010</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/09/">九月 2010</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/08/">八月 2010</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/07/">七月 2010</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/06/">六月 2010</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/05/">五月 2010</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/04/">四月 2010</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/03/">三月 2010</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/02/">二月 2010</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/12/">十二月 2009</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/10/">十月 2009</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/09/">九月 2009</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/06/">六月 2009</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/05/">五月 2009</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/04/">四月 2009</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/03/">三月 2009</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/02/">二月 2009</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2008/12/">十二月 2008</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2008/11/">十一月 2008</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2008/10/">十月 2008</a><span class="archive-list-count">20</span></li></ul>
    </div>
  </div>


  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 lantianjialiang<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
  
  <script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  <span id="busuanzi_container_site_pv">本站总访问量<span id="busuanzi_value_site_pv"></span>次</span>
        
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>